<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="styles.css">
    <script>
        function icluirCandidato(){
            
            let nome = document.getElementById("nome").value;
            let cpf = document.getElementById("cpf").value;
            let identidade = document.getElementById("identidade").value;
            let email = document.getElementById("email").value;
            let cargo = document.getElementById("cargo").value;
            let sala = document.getElementById("sala").value;
            let objForm = {"nome": nome,"cpf": cpf,"identidade": identidade, "email": email, "cargo": cargo, "sala": sala};
            let objJson = JSON.stringify(objForm);
            
            console.log("JSON: " + objJson);


            let xmlhttp = new XMLHttpRequest();
            console.log("1");
            xmlhttp.onreadystatechange = function() {
            if (this.readyState == 4 && this.status == 200) {
                console.log("Chegou a resposta OK: " + this.responseText);
                console.log("2");
                document.getElementById("msg").innerHTML = this.responseText;
            } else if (this.readyState < 4) {
                console.log("3: " + this.readyState);
            } else
                console.log("Requisicao falhou: " + this.status);
            }
                console.log("4");
                xmlhttp.open("GET", "http://localhost/3DAW/3DAW/3DAW-AV1/criarPergunta.php?nome=" + nome +  "&cpf=" + cpf + "&identidade=" + identidade + "&email=" + email + "&cargo=" + cargo + "&sla" + sala);
                xmlhttp.send();
                console.log("enviei form");
                console.log("5");

                window.location.assign=("/3DAW/3DAW/3DAW-AV2/index.php");
            }

    </script>
    <title>Criar Perguntas</title>
</head>
<body>
    <form action="" method="POST" id="formPergunta">
        <h1>Incluir Candidato</h1>
        <label for="nome">Informe seu Nome:</label>
        <br>
        <input type="text" name="nome" id="nome">
        <br><br>
        <label for="cpf">CPF:</label>
        <br>
        <input type="text" name="cpf" id="cpf">
        <br><br>
        <label for="identidade">Identidade: </label>
        <br>
        <input type="text" name="identidade" id="identidade"> 
        <br><br>
        <label for="email">Email: </label>
        <br>
        <input type="text" name="email" id="email">
        <br><br>
        <label for="cargo">Cargo Pretendido: </label>
        <br>
        <input type="text" name="cargo" id="cargo">
        <br><br>
        <label for="sala">Local de Prova: </label>
        <br>
        <input type="text" name="sala" id="sala">
        <br><br>
        <a class="botao-voltar" href="index.php">Voltar</a>
        <input class="botao-perguntas" type="submit" onclick="incluirCandidato();">
    </form>

    <p id="msg"></p>
</body>
</html>