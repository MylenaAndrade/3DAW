<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="styles.css">
    <script>
        function alterarPergunta(){
            let urlAtual = window.location.href;
            let urlClass = new URL(urlAtual);
            let id = urlClass.searchParams.get("id");
            console.log(id);

            let pergunta = document.getElementById("pergunta").value;
            let resposta1 = document.getElementById("resposta1").value;
            let resposta2 = document.getElementById("resposta2").value;
            let resposta3 = document.getElementById("resposta3").value;
            let resposta4 = document.getElementById("resposta4").value;

            let xmlhttp = new XMLHttpRequest();
            console.log("1");
            xmlhttp.onreadystatechange = function() {
            if (this.readyState == 4 && this.status == 200) {
                console.log("Chegou a resposta OK: " + this.responseText);
                console.log("2");
                document.getElementById("msg").innerHTML = this.responseText;
            } else if (this.readyState < 4) {
                console.log("3: " + this.readyState);
            } else
                console.log("Requisicao falhou: " + this.status);
            }
                console.log("4");
                xmlhttp.open("GET", "http://localhost/3DAW/3DAW/3DAW-AV1/alterarPergunta.php?id=" + id + "&pergunta=" + pergunta +  "&resposta1=" + resposta1 + "&resposta2=" + resposta2 + "&resposta3=" + resposta3 + "&resposta4=" + resposta4);
                xmlhttp.send();
                console.log("enviei form");
                console.log("5");
        }
    </script>
    <title>Alterar Pergunta</title>
</head>
<body class="inserir-aluno">
<form method="POST">
    <h1 class="inserir-aluno-titulo"><h1>Alterar Pergunta</h1></h1>
    <label class="id" for="" id="id">ID: </label>
    <script>
        let urlAtual = window.location.href;
        let urlClass = new URL(urlAtual);
        let id = urlClass.searchParams.get("id");
        console.log(id);

        const identificao = document.createElement("p");

        identificao.textContent = id; 

        let p = document.getElementById("id");
        p.insertAdjacentElement("beforeend", identificao);
        
    </script>
    <br>
    <label for="">Digite sua pergunta</label>
        <br>
        <input type="text" name="pergunta" id="pergunta">
        <br><br>
        <h3>Gostaria que ela fosse discursiva?</h3>
        <p>Se sim deixe as opções abaixo em branco!</p>
        <br><br>
        <label for="">Digite a primeira opcao: </label>
        <br>
        <input type="text" name="resposta1" id="resposta1">
        <br><br>
        <label for="">Digite a segunda opcao: </label>
        <br>
        <input type="text" name="resposta2" id="resposta2"> 
        <br><br>
        <label for="">Digite a terceira opcao: </label>
        <br>
        <input type="text" name="resposta3" id="resposta3">
        <br><br>
        <label for="">Digite a resposta da pergunta: </label>
        <br>
        <input type="text" name="resposta4" id="resposta4">
        <br><br>
    <a class="botao-voltar" href="index.php">Voltar</a>
    <input class="botao-perguntas" type="submit" onclick="alterarPergunta();">
    
    </form>
    <p id="msg"></p>
    <script>
        window.location.assign=("/3DAW/3DAW/3DAW-AV1/index.php");
    </script>
</body>
</html>